<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<<<<<<< HEAD
    <title>ProjektBoard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Karla&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/6167bea25e.js" crossorigin="anonymous"></script>
    <script src="/jqueryui/jquery.js"></script>
    <script src="/jqueryui/jquery-ui.js"></script>
    <script>
        $(document).ready(function () {
            $('#list-1,#list-2,#list-3').sortable({ connectWith: '#list-1,#list-2,#list-3' });

        });
    </script>

</head>

<body onload="create_backlogs_task(), create_finished_task()">

    <!-- The core Firebase JS SDK is always required and must be listed first -->

    <!--<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-auth.js"></script>-->

    <!--<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase-database.js"></script>-->
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/3.1.0/firebase.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-analytics.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
    <script>
        var firebaseConfig = {
            apiKey: "AIzaSyASvw80DuelGaKx3v3NoK4eo13tT_C1Q7U",
            authDomain: "dpprojekt-3d1fd.firebaseapp.com",
            databaseURL: "https://dpprojekt-3d1fd.firebaseio.com",
            projectId: "dpprojekt-3d1fd",
            storageBucket: "dpprojekt-3d1fd.appspot.com",
            messagingSenderId: "455950445352",
            appId: "1:455950445352:web:c551266cc5d56e5ecd7e1d",
            measurementId: "G-91EEZ5MBPF"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        firebase.analytics();

        function add_task() {
            input_box = document.getElementById("input-text");
            input_date = document.getElementById("input_date");
            input_desc = document.getElementById("input_desc");
            input_type = document.getElementById("input_type");
            if (input_box.value.length != 0 && input_date.value.length != 0) {
                // our boxes have data and we take database
                var key = firebase.database().ref().child("Backlogs").push().key;
                var task = {
                    title: input_box.value,
                    date: input_date.value,
                    desc: input_desc.value,
                    type: input_type.value,
                    key: key
                };

                var updates = {};
                updates["/BackLogs/" + key] = task;
                firebase.database().ref().update(updates);
                create_backlogs_task();
            }
        }


        function create_backlogs_task() {
            container=document.getElementsByClassName("list-1");
            container.innerHTML="";
            task_array = [];
            firebase.database().ref("BackLogs").once('value', function (snapshot) {
                snapshot.forEach(function (childSnapshot) {
                    var childKey = childSnapshot.key;
                    var childData = childSnapshot.val();
                    task_array.push(Object.values(childData));
                });

                for (var i, i = 0; i < task_array.length; i++) {
                    task_date = task_array[i][0];
                    task_desc = task_array[i][1];
                    task_key = task_array[i][2];
                    task_title = task_array[i][3];
                    task_type = task_array[i][4];

                    task_container = document.createElement("div");
                    task_container.setAttribute("id", "list-1");
                    task_container.setAttribute("data-key", task_key);

                    // TASK DATA
                    task_data = document.createElement('div');
                    task_data.setAttribute('id', 'task_data');

                    title = document.createElement('p');
                    title.setAttribute('id', 'task_title');
                    title.setAttribute('contenteditable', false);
                    title.innerHTML = task_title;

                    desc = document.createElement('p');
                    desc.setAttribute('id', 'task_title');
                    desc.setAttribute('contenteditable', false);
                    desc.innerHTML = task_desc;

                    date = document.createElement('p');
                    date.setAttribute('id', 'task_date');
                    date.setAttribute('contenteditable', false);
                    date.innerHTML = task_date;

                    type = document.createElement('p');
                    type.setAttribute('id', 'task_date');
                    type.setAttribute('contenteditable', false);
                    type.innerHTML = task_type;

                    //new code 
                   /* let li = document.querySelector("#list-1");
                    let item = document.createElement("li");
                    let tex = document.createTextNode(task_title +"\u000A" + task_date);
                    item.appendChild(tex);
                    li.appendChild(item);
                    console.log(li);*/

                    // TASK TOOLS
                    task_tool = document.createElement('div');
                    task_tool.setAttribute('id', 'task_tool');

                    task_done_button = document.createElement('button');
                    task_done_button.setAttribute('id', 'task_done_button');
                    task_done_button.setAttribute('onclick', "task_done(this.parentElement.parentElement, this.parentElement)");

                    fa_done = document.createElement('i');
                    fa_done.setAttribute('class', 'fa fa-check');

                    task_edit_button = document.createElement('button');
                    task_edit_button.setAttribute('id', 'task_edit_button');
                    task_edit_button.setAttribute('onclick', "task_edit(this.parentElement.parentElement, this)");

                    fa_edit = document.createElement('i');
                    fa_edit.setAttribute('class', 'fa fa-pencil');

                    task_delete_button = document.createElement('button');
                    task_delete_button.setAttribute('id', 'task_delete_button');
                    task_delete_button.setAttribute('onclick', "task_delete(this.parentElement.parentElement)");

                    fa_delete = document.createElement('i');
                    fa_delete.setAttribute('class', 'fa fa-trash');

                   // container.append(task_container);
                    task_data.append(title);
                    task_data.append(desc);
                    task_data.append(date);
                    task_data.append(type);
                    task_container.append(task_data);
                   

                    task_container.append(task_tool);
                    task_tool.append(task_done_button);
                    task_done_button.append(fa_done);
                    task_tool.append(task_edit_button);
                    task_edit_button.append(fa_edit);
                    task_tool.append(task_delete_button);
                    task_delete_button.append(fa_delete);

                    container.append(task_container);
                }
            });
        }

        function create_finished_task() {

            finished_task_container = document.getElementsByClassName("container")[1];
            finished_task_container.innerHTML = "";

            finished_task_array = [];

            firebase.database().ref("finished_task").once('value', function (snapshot) {
                snapshot.forEach(function (childSnapshot) {
                    var childKey = childSnapshot.key;
                    var childData = childSnapshot.val();
                    finished_task_array.push(Object.values(childData));
                });

                for (var i, i = 0; i < finished_task_array.length; i++) {
                    task_date = finished_task_array[i][0];
                    task_desc = finished_task_array[i][1];
                    task_key = finished_task_array[i][2];
                    task_title = finished_task_array[i][3];
                    task_type = finished_task_array[i][4];


                    task_container = document.createElement("div");
                    task_container.setAttribute("class", "task_container");
                    task_container.setAttribute("data-key", task_key);

                    // TASK DATA
                    task_data = document.createElement('div');
                    task_data.setAttribute('id', 'task_data');

                    title = document.createElement('p');
                    title.setAttribute('id', 'task_title');
                    title.setAttribute('contenteditable', false);
                    title.innerHTML = task_title;

                    desc = document.createElement('p');
                    desc.setAttribute('id', 'task_title');
                    desc.setAttribute('contenteditable', false);
                    desc.innerHTML = task_desc;

                    date = document.createElement('p');
                    date.setAttribute('id', 'task_date');
                    date.setAttribute('contenteditable', false);
                    date.innerHTML = task_date;

                    type = document.createElement('p');
                    type.setAttribute('id', 'task_date');
                    type.setAttribute('contenteditable', false);
                    type.innerHTML = task_type;

                    // TASK TOOLS
                    task_tool = document.createElement('div');
                    task_tool.setAttribute('id', 'task_tool');

                    task_delete_button = document.createElement('button');
                    task_delete_button.setAttribute('id', 'task_delete_button');
                    task_delete_button.setAttribute('onclick', "task_finished_delete(this.parentElement.parentElement)");
                    fa_delete = document.createElement('i');
                    fa_delete.setAttribute('class', 'fa fa-trash');

                    finished_task_container.append(task_container);
                    task_container.append(task_data);
                    task_data.append(title);
                    task_data.append(desc);
                    task_data.append(date);
                    task_data.append(type);

                    task_container.append(task_tool);
                    task_tool.append(task_delete_button);
                    task_delete_button.append(fa_delete);
                }
            });
        }

        function task_done(task, task_tool) {
            finished_task_container = document.getElementsByClassName("container")[1];
            task.removeChild(task_tool);
            finished_task_container.append(task);

            var key = task.getAttribute("data-key");
            var task_obj = {
                title: task.childNodes[0].childNodes[0].innerHTML,
                desc: task.childNodes[0].childNodes[1].innerHTML,
                date: task.childNodes[0].childNodes[2].innerHTML,
                type: task.childNodes[0].childNodes[3].innerHTML,
                key: key
            };

            var updates = {};
            updates["/finished_task/" + key] = task_obj;
            firebase.database().ref().update(updates);

            // delete our task from unfinished
            task_delete(task);
            create_finished_task();
        }


        function task_edit(task, edit_button) {
            edit_button.setAttribute("id", "task_edit_button_editing");
            edit_button.setAttribute("onclick", "finish_edit(this.parentElement.parentElement, this)");

            title = task.childNodes[0].childNodes[0];
            title.setAttribute("contenteditable", true);
            title.setAttribute("id", "title_editing");
            title.focus();

            desc = task.childNodes[0].childNodes[1];
            desc.setAttribute("contenteditable", true);
            desc.setAttribute("id", "title_editing");
            desc.focus();

            date = task.childNodes[0].childNodes[2];
            date.setAttribute("contenteditable", true);
            date.setAttribute("id", "date_editing");

            type = task.childNodes[0].childNodes[2];
            type.setAttribute("contenteditable", true);
            type.setAttribute("id", "title_editing");
        }

        function finish_edit(task, edit_button) {
            edit_button.setAttribute("id", "task_edit_button");
            edit_button.setAttribute("onclick", "task_edit(this.parentElement.parentElement, this)");

            title = task.childNodes[0].childNodes[0];
            title.setAttribute("contenteditable", true);
            title.setAttribute("id", "title_editing");
            title.focus();

            desc = task.childNodes[0].childNodes[1];
            desc.setAttribute("contenteditable", true);
            desc.setAttribute("id", "title_editing");
            desc.focus();

            date = task.childNodes[0].childNodes[2];
            date.setAttribute("contenteditable", true);
            date.setAttribute("id", "date_editing");

            type = task.childNodes[0].childNodes[2];
            type.setAttribute("contenteditable", true);
            type.setAttribute("id", "title_editing");

            // change in firebase to
            var key = task.getAttribute("data-key");
            var task_obj = {
                title: task.childNodes[0].childNodes[0].innerHTML,
                desc: task.childNodes[0].childNodes[1].innerHTML,
                date: task.childNodes[0].childNodes[2].innerHTML,
                type: task.childNodes[0].childNodes[3].innerHTML,
                key: key
            };

            var updates = {};
            updates["/unfinished_task/" + key] = task_obj;
            firebase.database().ref().update(updates);
        }


        function task_delete(task) {
            key = task.getAttribute("data-key");
            task_to_remove = firebase.database().ref("unfinished_task/" + key);
            task_to_remove.remove();
            // remove from html view or whatevesss
            task.remove();
        }


        function task_finished_delete(task) {
            key = task.getAttribute("data-key");
            task_to_remove = firebase.database().ref("finished_task/" + key);
            task_to_remove.remove();
            // remove from html view or whatevesss
            task.remove();
        }
    </script>
    <nav class="navigation-bar">
        <div class="logo">
            <h1>Projekt Board</h1>
        </div>
        <div class="user">
            <div class="img-user">
                <img src="/img/account_circle-24px.svg" alt="">
            </div>
            <div class="username">
                <h4> User</h4>
            </div>
        </div>
    </nav>
    <div class="add-tasks">
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
        <input type="text" placeholder=" ADD A NEW TASK" id="input-text">
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
        <input id="input_date" type="date" /><br>
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
        <input type="text" placeholder="Enter Task Description" name="taskdField" id="input_desc">
        <i class="fa fa-plus-circle" aria-hidden="true"></i>
        <input type="text" placeholder="Define type" id="input_type">
        <button id="input_button" onclick="add_task()">
            Enter Task
        </button>
    </div>
    <div class="box">
        <div class="box1">
            <div class="heading">
                <div class="image-pen">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </div>
                <div class="stage">
                    <h3>BACKLOGS</h3>
                </div>
            </div>

            <div class="list-1">
                
            </div>

        </div>
        <div class="box2">
            <div class="heading">
                <div class="image-pen">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </div>
                <div class="stage">
                    <h3>IN PROGRESS</h3>
                </div>
            </div>

            <div class="list-2">
                <ul id="list-2">

                </ul>
            </div>

        </div>

        <div class="box3">
            <div class="heading">
                <div class="image-pen">
                    <i class="fa fa-pencil" aria-hidden="true"></i>
                </div>
                <div class="stage">
                    <h3>ACCOMPLISHED</h3>
                </div>
            </div>
            <div class="list-3">
                <ul id="list-3">

                </ul>
            </div>
        </div>
    </div>
</body>
<!--<script src="page.js"></script>-->
=======
    <title>Authentication</title>


    <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>
    <link rel="stylesheet" href="./css/styles.css">

    <script src="/__/firebase/7.15.0/firebase-app.js"></script>
    <script src="/__/firebase/7.15.0/firebase-auth.js"></script>
    <script src="/__/firebase/init.js"></script>


    <script type="text/javascript">
        function toggleSignIn() {
            if (!firebase.auth().currentUser) {
                var provider = new firebase.auth.GoogleAuthProvider();
                provider.addScope('https://www.googleapis.com/auth/contacts.readonly');
                firebase.auth().signInWithPopup(provider).then(function(result) {
                    // This gives you a Google Access Token. You can use it to access the Google API.
                    var token = result.credential.accessToken;
                    var user = result.user;
                    // [START_EXCLUDE]
                    document.getElementById('quickstart-oauthtoken').textContent = token;
                    // [END_EXCLUDE]
                }).catch(function(error) {
                    var errorCode = error.code;
                    var errorMessage = error.message;
                    var email = error.email;
                    var credential = error.credential;
                    if (errorCode === 'auth/account-exists-with-different-credential') {
                        alert('You have already signed up with a different auth provider for that email.');
                        // If you are using multiple auth providers on your app you should handle linking
                        // the user's accounts here.
                    } else {
                        console.error(error);
                    }
                });

            } else {
                firebase.auth().signOut();
            }
            document.getElementById('quickstart-sign-in').disabled = true;
        }


        function initApp() {
            // Listening for auth state changes.
            firebase.auth().onAuthStateChanged(function(user) {
                if (user) {
                    var displayName = user.displayName;
                    var email = user.email;
                    var emailVerified = user.emailVerified;
                    var photoURL = user.photoURL;
                    var isAnonymous = user.isAnonymous;
                    var uid = user.uid;
                    var providerData = user.providerData;
                    document.getElementById('quickstart-sign-in-status').textContent = 'Signed in';
                    document.getElementById('quickstart-sign-in').textContent = 'Sign out';
                    document.getElementById('quickstart-account-details').textContent = JSON.stringify(user, null, '  ');
                } else {
                    // User is signed out.
                    document.getElementById('quickstart-sign-in-status').textContent = 'Signed out';
                    document.getElementById('quickstart-sign-in').textContent = 'Sign in with Google';
                    document.getElementById('quickstart-account-details').textContent = 'null';
                    document.getElementById('quickstart-oauthtoken').textContent = 'null';
                }
                document.getElementById('quickstart-sign-in').disabled = false;
            });
            // [END authstatelistener]

            document.getElementById('quickstart-sign-in').addEventListener('click', toggleSignIn, false);
        }

        window.onload = function() {
            initApp();
        };
    </script>
</head>

<body>
    <div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-header">

        <!-- Header section containing title -->
        <header class="mdl-layout__header mdl-color-text--white mdl-color--light-blue-700">
            <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid">
                <div class="mdl-layout__header-row mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--8-col-desktop">
                    <a href="/">
                        <h3>Firebase Authentication</h3>
                    </a>
                </div>
            </div>
        </header>

        <main class="mdl-layout__content mdl-color--grey-100">
            <div class="mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-grid">

                <!-- Container for the demo -->
                <div class="mdl-card mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-cell--12-col-tablet mdl-cell--12-col-desktop">
                    <div class="mdl-card__title mdl-color--light-blue-600 mdl-color-text--white">
                        <h2 class="mdl-card__title-text">Google Authentication with Popup</h2>
                    </div>
                    <div class="mdl-card__supporting-text mdl-color-text--grey-600">
                        <p>Sign in with your Google account below.</p>

                        <!-- Button that handles sign-in/sign-out -->
                        <button disabled class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-in">Sign in with Google</button>

                        <!-- Container where we'll display the user details -->
                        <div class="quickstart-user-details-container">
                            Firebase sign-in status: <span id="quickstart-sign-in-status">Unknown</span>
                            <div>Firebase auth <code>currentUser</code> object value:</div>
                            <pre><code id="quickstart-account-details">null</code></pre>
                            <div>Google OAuth Access Token:</div>
                            <pre><code id="quickstart-oauthtoken">null</code></pre>

                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
>>>>>>> 27cd9b671a43ee4e65968f8b9b68fe0e64c28407

</html>